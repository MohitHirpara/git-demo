pipeline {
  agent any
  parameters{
        choice(
            name: 'ver_step',
            choices: ['clean', 'setup', 'only_setup', 'verify', 'assert', 'view_setup'], 
            description: 'Select Step for Fistail!')
        string(
            defaultValue: 'Default',
            description: 'Pass Name for Fishtail ',
            name: 'Pass_Name',
            trim: true)}
  stages {
    stage ('Build') {
      steps{
          //echo "Using Branch : ${params.branch}"
          build job: 'Demo_sdc2cms' , propagate: true, wait: true
        }
    }
    stage ('2nd Build') {
        steps{
            build job: 'Demo_STA_DashBoard' , propagate: true, wait: true
        }
    }
    stage ('3rd Build') {
        steps{
            build job: 'demo-fishtail' , propagate: true, wait: true , parameters: [[$class: 'StringParameterValue', name: 'step', value: params.ver_step],[$class: 'StringParameterValue', name: 'PASS_Name', value: params.Pass_Name]]
        }
    }
    }
}
